#!/bin/bash

# This file is managed by yadm and sourced by ~/.bashrc.

# Get the root directory of the bash.d project
# This assumes that the bash.d project is cloned in ~/bash.d
export BASHD_DIR="$HOME/bash.d"

# --- bash-it ---
# Load bash-it
# The BASH_IT variable is used by bash-it to find its installation directory.
export BASH_IT="$BASHD_DIR/bash_functions.d/bash-it"

# Load Bash It
# Set BASH_IT_THEME to 'powerline-plain' for a clean, modern prompt.
export BASH_IT_THEME='powerline-plain'
source "$BASH_IT/bash_it.sh"


# --- bash.d custom functions ---
# Source all .sh files from the bash_functions.d directory.
# This provides the custom functions and tools of the bash.d ecosystem.
for f in "$BASHD_DIR"/bash_functions.d/*.sh; do
    source "$f"
done

# --- Custom aliases and settings ---
# Add any personal aliases or settings below this line.

alias ls='ls --color=auto'
alias ll='ls -alF'
alias la='ls -A'
alias l='ls -CF'

# Add the project's bin directory to the PATH
export PATH="$BASHD_DIR/bin:$BASHD_DIR/scripts:$BASHD_DIR/apis:$PATH"

# ============================================
# bash.d Quick Commands
# ============================================

# Inventory - Quick access to system inventory
alias inventory='$BASHD_DIR/scripts/inventory.sh'
alias inv='$BASHD_DIR/scripts/inventory.sh'

# Backup - Quick access to backup system
alias backup='$BASHD_DIR/scripts/backup.sh'
alias backup-full='$BASHD_DIR/scripts/backup.sh full'
alias backup-quick='$BASHD_DIR/scripts/backup.sh quick'

# AI Agents - Quick access to AI helpers
alias ai='$BASHD_DIR/scripts/ai_agent.sh'
alias aichat='$BASHD_DIR/scripts/ai_agent.sh chat'
alias aicode='$BASHD_DIR/scripts/ai_agent.sh code'
alias aidebug='$BASHD_DIR/scripts/ai_agent.sh debug'
alias aibash='$BASHD_DIR/scripts/ai_agent.sh bash'

# API Manager
alias api='$BASHD_DIR/apis/api_manager.sh'
alias github-api='$BASHD_DIR/apis/api_manager.sh github'
alias cf-api='$BASHD_DIR/apis/api_manager.sh cloudflare'

# Conversation Logger
alias chatlog='$BASHD_DIR/scripts/conversation_logger.sh'
alias newchat='$BASHD_DIR/scripts/conversation_logger.sh new'

# Quick functions
function invall() { $BASHD_DIR/scripts/inventory.sh all; }
function backup-all() { $BASHD_DIR/scripts/backup.sh full; }
function ai-help() { $BASHD_DIR/scripts/ai_agent.sh; }

# Ollama shortcuts
alias oll='ollama'
alias ollist='ollama list'
alias ollpull='ollama pull'

# System Analyzer
alias sys-analyze='$BASHD_DIR/scripts/system_analyzer.sh'
alias sysmon='$BASHD_DIR/scripts/monitor.sh'

# AI System Agent
alias ai-sys='$BASHD_DIR/scripts/ai_sys_agent.sh'

# Menu Launcher
alias menu='bash $BASHD_DIR/scripts/menu.sh'

# Debug & Test Agent
alias ai-debug='$BASHD_DIR/scripts/debug_agent.sh'
alias debug='$BASHD_DIR/scripts/debug_agent.sh'

# RAG System
alias rag-stats='cd $BASHD_DIR/telemetry && python3 rag.py stats'
alias rag-search='cd $BASHD_DIR/telemetry && python3 rag.py search'

# ETL Pipeline
alias etl-run='cd $BASHD_DIR/telemetry && python3 etl.py --once'
alias etl-start='cd $BASHD_DIR/telemetry && python3 etl.py'

# Multi-Agent System
alias multi-agent='python3 $BASHD_DIR/scripts/multi_agent.py'
alias agent-multi='python3 $BASHD_DIR/scripts/multi_agent.py'

# OpenTelemetry
alias otel-init='cd $BASHD_DIR/telemetry && python3 otel.py --init'
alias otel-status='cd $BASHD_DIR/telemetry && python3 otel.py --status'

# Unified library functions (from 90_unified_library.sh)
# These are auto-loaded from bash_functions.d
# Quick access:
alias bfd='source $BASHD_DIR/bash_functions.d/90_unified_library.sh'
alias sysinfo='sys_info'
alias sysdisk='sys_disk'
alias sysmem='sys_mem'
alias netcheck='net_check'
alias netip='net_myip'
alias gits='git status'
alias gitpush='git push'
alias dockerps='docker ps'
alias dockerclean='docker_clean'
